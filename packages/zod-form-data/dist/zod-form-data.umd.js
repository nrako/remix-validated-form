(function(n,t){typeof exports=="object"&&typeof module!="undefined"?t(exports,require("zod")):typeof define=="function"&&define.amd?define(["exports","zod"],t):(n=typeof globalThis!="undefined"?globalThis:n||self,t(n["zod-form-data"]={},n.zod))})(this,function(n,t){"use strict";const y=e=>{if(e.length===0)return[];const r=e.match(/^\[(.+?)\](.*)$/)||e.match(/^\.?([^\.\[\]]+)(.*)$/);if(r){const[s,i,o]=r;return[/^\d+$/.test(i)?Number(i):i,...y(o)]}return[e]};function D(e,r,s){return N(e,y(r),s)}function N(e,r,s){var j;const i=r.slice(0,-1),o=r[r.length-1];let a=e;for(let f=0;f<i.length;f++){const p=i[f];if(a[p]===void 0){const O=(j=i[f+1])!=null?j:o;a[p]=typeof O=="number"?[]:{}}a=a[p]}return a[o]=s,e}const u=t.z.literal("").transform(()=>{}),c=e=>r=>{const s=e.safeParse(r);return s.success?s.data:r},l=(e=t.z.string())=>t.z.preprocess(c(u),e),b=(e=t.z.number())=>t.z.preprocess(c(t.z.union([u,t.z.string().transform(r=>Number(r)).refine(r=>!Number.isNaN(r))])),e),g=({trueValue:e="on"}={})=>t.z.union([t.z.literal(e).transform(()=>!0),t.z.literal(void 0).transform(()=>!1)]),h=(e=t.z.instanceof(File))=>t.z.preprocess(r=>r instanceof File&&r.size===0?void 0:r,e),m=(e=t.z.array(l()))=>t.z.preprocess(r=>Array.isArray(r)?r:r===void 0?[]:[r],e),T=e=>m(t.z.array(e)),F=t.z.array(t.z.tuple([t.z.string(),t.z.any()])),S=e=>{try{return JSON.parse(e)}catch{return e}},z=e=>t.z.preprocess(c(t.z.union([u,t.z.string().transform(r=>S(r))])),e),P=c(t.z.any().refine(e=>Symbol.iterator in e).transform(e=>[...e]).refine(e=>F.safeParse(e).success).transform(e=>{const r=new Map;for(const[s,i]of e)r.has(s)?r.get(s).push(i):r.set(s,[i]);return[...r.entries()].reduce((s,[i,o])=>D(s,i,o.length===1?o[0]:o),{})})),_=P,d=e=>t.z.preprocess(P,e instanceof t.ZodType?e:t.z.object(e));var k=Object.freeze(Object.defineProperty({__proto__:null,text:l,numeric:b,checkbox:g,file:h,repeatable:m,repeatableOfType:T,json:z,preprocessFormData:_,formData:d},Symbol.toStringTag,{value:"Module"}));n.checkbox=g,n.file=h,n.formData=d,n.json=z,n.numeric=b,n.preprocessFormData=_,n.repeatable=m,n.repeatableOfType=T,n.text=l,n.zfd=k,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=zod-form-data.umd.js.map
