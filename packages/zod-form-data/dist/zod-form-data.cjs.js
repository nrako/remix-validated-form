"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t=require("zod");const z=e=>{if(e.length===0)return[];const r=e.match(/^\[(.+?)\](.*)$/)||e.match(/^\.?([^\.\[\]]+)(.*)$/);if(r){const[n,s,o]=r;return[/^\d+$/.test(s)?Number(s):s,...z(o)]}return[e]};function N(e,r,n){return T(e,z(r),n)}function T(e,r,n){var m;const s=r.slice(0,-1),o=r[r.length-1];let a=e;for(let c=0;c<s.length;c++){const u=s[c];if(a[u]===void 0){const D=(m=s[c+1])!=null?m:o;a[u]=typeof D=="number"?[]:{}}a=a[u]}return a[o]=n,e}const f=t.z.literal("").transform(()=>{}),i=e=>r=>{const n=e.safeParse(r);return n.success?n.data:r},l=(e=t.z.string())=>t.z.preprocess(i(f),e),b=(e=t.z.number())=>t.z.preprocess(i(t.z.union([f,t.z.string().transform(r=>Number(r)).refine(r=>!Number.isNaN(r))])),e),y=({trueValue:e="on"}={})=>t.z.union([t.z.literal(e).transform(()=>!0),t.z.literal(void 0).transform(()=>!1)]),d=(e=t.z.instanceof(File))=>t.z.preprocess(r=>r instanceof File&&r.size===0?void 0:r,e),p=(e=t.z.array(l()))=>t.z.preprocess(r=>Array.isArray(r)?r:r===void 0?[]:[r],e),g=e=>p(t.z.array(e)),j=t.z.array(t.z.tuple([t.z.string(),t.z.any()])),F=e=>{try{return JSON.parse(e)}catch{return e}},h=e=>t.z.preprocess(i(t.z.union([f,t.z.string().transform(r=>F(r))])),e),P=i(t.z.any().refine(e=>Symbol.iterator in e).transform(e=>[...e]).refine(e=>j.safeParse(e).success).transform(e=>{const r=new Map;for(const[n,s]of e)r.has(n)?r.get(n).push(s):r.set(n,[s]);return[...r.entries()].reduce((n,[s,o])=>N(n,s,o.length===1?o[0]:o),{})})),_=P,x=e=>t.z.preprocess(P,e instanceof t.ZodType?e:t.z.object(e));var S=Object.freeze(Object.defineProperty({__proto__:null,text:l,numeric:b,checkbox:y,file:d,repeatable:p,repeatableOfType:g,json:h,preprocessFormData:_,formData:x},Symbol.toStringTag,{value:"Module"}));exports.checkbox=y;exports.file=d;exports.formData=x;exports.json=h;exports.numeric=b;exports.preprocessFormData=_;exports.repeatable=p;exports.repeatableOfType=g;exports.text=l;exports.zfd=S;
//# sourceMappingURL=zod-form-data.cjs.js.map
